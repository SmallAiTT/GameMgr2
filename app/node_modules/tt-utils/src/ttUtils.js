var ResultVo = require("./vo/ResultVo")

var ttUtils = {};
ttUtils.transReq = function(req, doClass, isInit){
    var obj = new doClass();
    var body = req.body;
    for (var key in obj) {
        obj[key] = body[key] || (isInit ? obj[key] : null);
    }
    return obj
};

ttUtils.createPoByCtrl = function(req, res, client, PoClass){
    var po = ttUtils.transReq(req, PoClass);
    client.create(PoClass, po, function(err, result){
        err ? ttUtils.doErr(res, err) : ttUtils.doInfo(res);
    });
}

ttUtils.doInfo = function(res, msg, value){
    res.json(new ResultVo(ResultVo.INFO, msg || "Success!", value));
};

ttUtils.doWarn = function(res, msg, value){
    res.json(new ResultVo(ResultVo.WARN, msg || "Warning!", value));
};

ttUtils.doErr = function(res, msg, value){
    res.json(new ResultVo(ResultVo.ERR, msg, value));
};

ttUtils.doQuest = function(res, msg, value){
    res.json(new ResultVo(ResultVo.QUEST, msg, value));
};


module.exports = ttUtils;