var http = require("http");
var ctrlConst = require("../cfg/ctrlConst");
var ctrlUrl = ctrlConst.biz;

var path = require("path");
var fs = require("fs");


module.exports = function(app){
    var portals = ctrlUrl.portals;
    for(var i = 0, li = portals.length; i < li; ++i){
        var p = portals[i];
        app.post(p, function(req, res){
            req.on("data", function(chunk){
                var fileName = path.join(__dirname, "../resXml", path.basename(req.url) + ".xml");
                console.log(fileName);
                res.end(fs.readFileSync(fileName).toString());
            });
        });
    }
};